# DirectoryIndex file3.html


# Redirect /apache/redirect-test /apache
# URLで/apache/redirect-testを指定すると/apacheに転送する
# 転送後、DirectoryIndex file3.htmlの処理が走りfile3.htmlの処理が実行される

# Redirect 301 /apache/file1 /apache/dir-test/file1.html

# 302はサーバーの設定が即時反映されるが
# 301は設定を変更してもキャッシュの情報などからredirect先の情報を取ってくる

RewriteEngine on
# RewriteRule rewrite-test/index.html /apache/rewrite-test/tmp.html
# redirectの時と違いサーバー側で擬似的に処理をするのでクライアント側でURLが変わることはない
RewriteBase /apache/rewrite-test/
# 以下の記載をする場合、/apache/rewrite-test/のパスの記載を省略する
# RewriteRule rewrite-test/imgs/150.jpg imgs/150.png
# /apache/rewrite-test/imgs/150.pngと記述するとこをRewriteBaseで省略している
# RewriteRule rewrite-test/sub1 /apache/rewrite-test/sub2/

# RewriteRule rewrite-test/sub1/(.+\.html) /apache/rewrite-test/sub2/$1
# RewriteRule rewrite-test/imgs/(\d{3}).jpg imgs/$1.png
# ()で後方参照を行い、(\d{3})で数値3文字と指定、$1で表現している

# RewriteCond %{HTTP_HOST} ^localhost
# HTTP_HOSTで参照した値が前方一致でlocalhostと正しいか見ている
# RewriteRule rewrite-test/imgs/(\d{3}).jpg imgs/$1.png

RewriteCond %{QUERY_STRING} p=(.+)

RewriteRule rewrite-test/sub1 sub1/%1?